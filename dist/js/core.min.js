!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.Mk=e(t)}):"object"==typeof module&&module.exports?module.exports=t.document?e(t):function(t){if(!t.document)throw new Error("Mk[ui] requires a window with a document");return e(t)}:t.Mk=e(t)}("undefined"!=typeof window&&window||this,function(t){"use strict";function e(t,e){return this.find(t,e)}var n={}.hasOwnProperty,r=function(){};return r.fn={},r.fn.uid=function(){return"mkxxx4xxyxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t&&e||3&e|8).toString(16)})},r.type=function(t,e){for(var i,o=e.toLowerCase().split("|"),a=o.length,s=r.fn.typemap,u=0;u<a;u++)if(i=o[u],(n.call(s,i)?s[i]:s.defaultt)(t,i))return!0;return!1},r.fn.typemap={index:function(t,e){return t.indexOf(e)>-1},array:function(t){return t instanceof Array},empty:function(t){return""===t||null===t||void 0===t||!1===t},null:function(t){return null===t},date:function(t){return t instanceof Date||t===Date},nodelist:function(t){return t instanceof NodeList},node:function(t){return/1|9|11/.test(t&&t.nodeType||0)},window:function(t){return t&&t===t.window},function:function(t){return"function"==typeof t&&!r.fn.typemap.classlike(t)},arraylike:function(t){if(r.type(t,"function|string|window"))return!1;var e=!!t&&"number"==typeof t.length,n=e&&"length"in t&&t.length;return r.type(t,"array|nodelist")||0===n||e&&n>0&&n-1 in t},instance:function(t){var e=Object.getPrototypeOf(t),n=e&&e.hasOwnProperty("constructor")&&e.constructor,r={}.hasOwnProperty.toString;return!0!=("function"==typeof n&&r.call(n)===r.call(Object))},descriptor:function(t){var e=r.fn.typemap.index,n="object"==typeof t&&Object.keys(t||{})||[];if(e(n,"enumerable")&&e(n,"configurable")){if(e(n,"value"))return e(n,"writable");if(e(n,"get"))return e(n,"set")}return!1},classlike:function(t){return"function"==typeof t&&Object.keys(t.prototype).length>0},object:function(t){return!(!t||"object"!=typeof t||t instanceof Array)},defaultt:function(t,e){return typeof t===e}},r.fn.each=function(t,e,n){var i,a,s=0;if(r.type(e,"arraylike"))for(i=e.length;s<i&&!1!==(a=n.call(t,e[s],s,e));s++)-1===a&&([].splice.call(e,s,1),s--,i--);else for(s in e){if(!1===(a=n.call(t,e[s],s,e)))break;-1===a&&delete o[s]}return t},r.fn.first=function(t,e,n){var i;return r.fn.each(t,e,function(t,e,r){if(void 0!==(i=n.call(this,t,e,r)))return!1}),i},r.fn.map=function(t,e,n){var i,o,a;if(r.type(e,"arraylike"))i=[],Array.prototype.map.call(e,function(e,r,a){void 0!==(o=n.call(t,e,r,a))&&i.push(o)});else{i={};for(a in e)void 0!==(o=n.call(t,e[a],a,e))&&(i[a]=o)}return i},r.fn.filter=function(t,e,n){if(r.type(e,"arraylike"))return Array.prototype.filter.call(e,function(e,r,i){return n.call(t,e,r,i)});var i,o={};for(i in e)!1!==n.call(t,e[i],i,e)&&(o[i]=e[i]);return o},e.cache={},e.data=function(t,n,i){var o=t._id_||r.fn.uid(),a=i,s=e.cache[o]||{};return null===n?(t._id_=null,delete e.cache[o],s):null===a?(a=s[n],delete s[n],a):(void 0===a?void 0===(a=s[n])&&/1|9|11/.test(t.nodeType)&&(a=t.getAttribute("data-"+n)||void 0):s[n]=a,t._id_=o,e.cache[o]=s,a)},e.wrap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],li:[1,"<ul>","</ul>"],dd:[1,"<dl>","</dl>"],defaultt:[0,"",""]},e.wrap.optgroup=e.wrap.option,e.wrap.caption=e.wrap.thead,e.wrap.tbody=e.wrap.thead,e.wrap.tfoot=e.wrap.thead,e.wrap.dt=e.wrap.dd,e.markup=function(t){var n=document;if(!t)return n.createDocumentFragment();var r,i,o=n.createElement("template");if(o.content)return o.innerHTML=t,o.content;var a=(/^\s*<([^>\s]+)/.exec(t)||[])[1]||null,s=a&&e.wrap.hasOwnProperty(a)&&e.wrap[a]||e.wrap.defaultt,u=0;for(o=n.createElement("div"),o.innerHTML=s[1]+t+s[2],i=o.firstChild,r=n.createDocumentFragment();u<s[0];)i=i.firstChild,u++;return i&&r.appendChild(i),r},e.remove=function(t){if(t&&(1===t.nodeType||11===t.nodeType)){for(var n=t.childNodes,i=n.length;i--;)e.remove(n[i]);var o=e.data(t,null);o&&o.events&&r.fn.each(this,o.events,function(n,r){e.events.off(t,r)})}t.parentNode&&t.parentNode.removeChild(t)},e.events={capture:function(t,e){if(e)switch(t){case"mouseenter":case"mouseleave":case"blur":case"focus":return!0}return!1},delegate:function(t,n,r){var i=n.target,o={allowed:!1,target:t};if(r){if(n.toElement){var a=new e(n.toElement,t),s=new e(n.fromElement,t);if(a.is(r)&&s.parent(n.toElement).length||s.is(r)&&a.parent(n.fromElement).length)return o}new e(r,t).each(function(t){if(i===t||new e(i).parent(t).length)return o.allowed=!0,o.target=t,!1})}else o.allowed=!0;return o},on:function(t,e,n,r,i){var o=e.split(".");this.add({node:t,type:o.shift(),namespace:o.join("."),handler:r,single:i||!1,delegate:"string"==typeof n?n:void 0,capture:"boolean"==typeof n?n:void 0})},off:function(t,e,n){var r=e.split(".");this.remove({node:t,type:r.shift(),namespace:r.join("."),handler:n})},emit:function(t,e,n){var r=e.split("."),i=new Event(r.shift());i.namespace=r.join("."),i.data=n||[],t.dispatchEvent(i)},find:function(t,n,i){var o=e.data(t,"events")||{},a=o[n]||[];return r.fn.first(this,a,function(t){if(t.id===i)return t})},add:function(t){var n=r.fn.uid(),i=t.node,o=t.type,a=e.data(i,"events")||{},s=t.capture||this.capture(o,t.delegate),u=function(t){var r,i=e.events.find(this,t.type,n),o=e.events.delegate(this,t,i.delegate),a=!1;return t.namespace?t.namespace===i.namespace&&o.allowed&&(a=!0):o.allowed&&(a=!0),a&&(i.single&&e.events.remove({node:this,add:!1,type:i.type,handler:i.original,namespace:i.namespace}),r=i.original.apply(o.target,[t].concat(t.data))),r};a[o]=a[o]||[],a[o].push({type:o,capture:s,namespace:t.namespace,original:t.handler,delegate:t.delegate,handler:u,single:t.single,id:n}),e.data(i,"events",a),i.addEventListener(o,u,s)},remove:function(t){var n=t.node,i=t.type,o=t.handler,a=t.namespace,s=e.data(n,"events")||{},u=s[i]||[];r.fn.each(this,u,function(t){if(!(a&&t.namespace!==a||o&&o!==t.original))return n.removeEventListener(i,t.handler,t.capture),-1})}},e.prototype={length:0,context:null,constructor:e,toFrag:function(){var t=document.createDocumentFragment();return this.each(function(e){t.appendChild(e)}),t},nv:function(t,e,n){if("object"==typeof t){var r,i=Object.keys(t),o=i.length;return this.each(function(e){for(r=0;r<o;r++)n(e,i[r],t[i[r]])})}return void 0===e?this.length?n(this[0],t,e):void 0:this.each(function(r){n(r,t,e)})},first:function(){var t,e,n=/1|9|11/,r=0;if(this.length)for(t=this.length;r<t;)if(e=this[r],r++,n.test(e.nodeType))return e},last:function(){var t,e,n=/1|9|11/;if(this.length)for(e=this.length;e--;)if(t=this[e],n.test(t.nodeType))return t},each:function(t){for(var e=0,n=this.length;e<n&&!1!==t.call(this,this[e],e++););return this},index:function(t){if("number"!=typeof t&&this.length){for(var e=this[0],n=e.parentNode&&e.parentNode.childNodes||[],t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return 0}return this.length>t&&this[t]||void 0},find:function(t,n){var i,o=document;return(n=n||this.length&&this||void 0!==this.length&&this.context||[o])===this?new e(t,n):(r.type(n,"string")?n=new e(n,o):n.nodeType&&(n=[n]),i=t,r.type(t,"string")&&(/^\s*<([^>\s]+)/.test(t)?i=this.markup(t):(i=[],r.fn.each(this,n,function(e){i=i.concat([].slice.call(e.querySelectorAll(t)))}))),i&&/1|9|11/.test(i.nodeType)&&(i=[i]),r.type(i,"arraylike")&&(i=[].slice.call(i)),[].splice.call(this,0,this.length||0),i&&[].push.apply(this,i),this.context=n,this)},is:function(t){var n=new e(t,this.context),r=!1;return this.each(function(t){if(n.each(function(e){if(t===e)return r=!0,!1}),r)return!1}),r},filter:function(t){var n=new e(t,this.context),r=[];return this.each(function(t){n.each(function(e){t===e&&r.push(t)})}),new e(r,this.context)},parent:function(t,n){var r,i=[];return arguments.length?(r=new e(t,n),this.each(function(t){for(;t.parentNode;)r.each(function(e){if(e===t.parentNode)return i.indexOf(e)<0&&i.push(e),!1}),t=t.parentNode})):this.each(function(t){t.parentNode&&i.push(t.parentNode)}),new e(i)},closest:function(t,e){return this.parent(t,e)},markup:function(t){return e.markup(t).childNodes},html:function(t){if(void 0===t){var n=this.first();return n&&n.innerHTML||""}return this.each(function(n){for(var r=n.childNodes,i=r.length;i--;)e.remove(r[i]);n.appendChild(e.markup(t))})},text:function(t){if(void 0===t){var e=this.first();return e&&e.textContent||""}return this.each(function(e){e.textContent=t})},removeAttr:function(t){return this.each(function(e){e.removeAttribute(t)})},attr:function(t,e){return this.nv(t,e,function(t,e,n){if(void 0===n)return t.getAttribute(e);t.setAttribute(e,n)})},prop:function(t,e){return this.nv(t,e,function(t,e,n){if(void 0===n)return t[e]||void 0;t[e]=n})},val:function(t){return void 0===t&&this.length?this[0].value:this.each(function(e){e.value=t})},data:function(t,n){return this.nv(t,n,function(t,n,r){if(void 0===r||null===r)return e.data(t,n,r);e.data(t,n,r)})},css:function(t,e){return this.nv(t,e,function(t,e,n){if(void 0===n)return getComputedStyle(t).getPropertyValue(n);t.style[e]="number"==typeof n&&n+"px"||n})},hasClass:function(t){var e=!1;return this.each(function(n){if(e=n.classList?n.classList.contains(t):n.className&&n.className.trim().split(/\s+/g).indexOf(t)>-1)return!1}),e},addClass:function(t){var e=t.split(" ");return r.fn.each(this,e,function(t){this.each(function(e){if(e.classList)return void e.classList.add(t);r.$(e).hasClass(t)||(e.className=(e.className||"").trim()+" "+t.trim())})})},removeClass:function(t){var e=t.split(" ");return r.fn.each(this,e,function(t){this.each(function(e){if(e.classList)return void e.classList.remove(t);wrdBndryRegexp=new RegExp("\\b"+t.trim()+"\\b"),wrdBndryRegexp2=new RegExp("\\b "+t+"\\b"),e.className=e.className.replace(wrdBndryRegexp2,"").replace(wrdBndryRegexp,"").trim()})})},appendTo:function(t,n){var r=new e(t,n).last();return r&&r.appendChild(this.toFrag()),this},prependTo:function(t,n){var r=new e(t,n).last(),i=this.toFrag();return r&&(r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),this},append:function(t,n){var r=this.last();return r&&r.appendChild(new e(t,n).toFrag()),this},prepend:function(t,n){var r,i=this.last();return i&&(r=new e(t,n).toFrag(),i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r)),this},remove:function(t){var n=this;return t&&(n=new e(t,this)),n.each(function(t){e.remove(t)}),this},focus:function(){var t=this.last();return t&&t.focus(),this},blur:function(){var t=this.last();return t&&t.blur(),this},on:function(t,n,r,i){return r||(r=n,n=null),this.each(function(o){e.events.on(o,t,n,r,i)})},one:function(t,e,n){return this.on(t,e,n,!0)},off:function(t,n){return this.each(function(r){e.events.off(r,t,n)})},emit:function(t,n){return this.each(function(r){e.events.emit(r,t,n)})}},r.$=function(t,n){return new e(t,n)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),r.extend=function(t,e,n){var i;if(r.type(n,"undefined"))for(i in e)r.extend(t,e,i);else i=Object.getOwnPropertyDescriptor(e,n),!i||void 0===i.get&&void 0===i.set?r.property(t,n,i.writable?i.value:i):Object.defineProperty(t,n,i);return this},r.property=function(t,e,n){var i,o=n;return r.type(n,"function")&&(i=r.fn.wrapFunction(n,e),o={enumerable:!0,configurable:!0,get:function(){return i},set:function(t){if(r.type(t,"function"))return void(i=r.fn.wrapFunction(t,e));i=t}}),r.type(o,"descriptor")||(o={value:n,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,e,o),this},r.fn.wrapFunction=function(t,e){if(t._id_)return t;var n=function(){this._pushSuper(e);var n=t.apply(this,arguments);return this._popSuper(e),n};return n._id_=r.fn.uid(),n.toString=function(){return t.toString()},n},r.fn.pushSuper=function(t){this._chain_=this._chain_||[],this._chain_.push(t)},r.fn.popSuper=function(t){this._chain_.splice(this._chain_.lastIndexOf(t),1)},r.fn.template={xWhitespace:/[\r|\t|\n]+/g,xStatements:/{{([^}]+)}}(.*)({{\/\1}})/g,xInjections:/{{([^{]+)}}/g,markup:{highlight:'<span class="highlight">$1</span>',error:'<span class="error">{{template}} not found</span>'},parse:function(t,e,n,r){t=t||"",r=r||{},r.$key=e,n=n||{};var i=this;return i.get(t,n).replace(i.xWhitespace,"").replace(i.xStatements,function(t,o,a){return i.statements(t,e,o,a,n,r)}).replace(i.xInjections,function(t,o){return i.inject(t,e,o,n,r)})},get:function(t,e){var r=t;return e&&n.call(e,t)&&(r=e[t]),r instanceof Array&&(r=r.join("")),r},statements:function(t,e,r,i,o,a){var s=r.split(":"),u=s[0],c=s[1];return n.call(this.map,u)?this.map[u](i,e,o,"if"==u?a:a[c]||a,c):""},inject:function(t,e,i,o,a){var s=i.split(":"),u=s[0],c=s[1];return c&&n.call(this.map,u)?this.map[u](c,e,o,a,c):n.call(a,u)&&!r.type(a[u],"undefined|null")?a[u]:""},map:{loop:function(t,e,n,i,o){var a,s,u,c=r.fn.template,f=[],l=0;if(/^\d+$/.test(o)){for(a=parseInt(o,10);l<a;l++)i.$index=l,f.push(c.parse(t,e,n,i));delete i.$index}else if(r.type(i,"arraylike"))for(a=i.length;l<a;l++)s=i[l],r.type(s,"object")||(s={key:"",value:s}),s.$index=l,f.push(c.parse(t,e,n,s)),delete s.$index;else{u=0;for(a in i)f.push(c.parse(t,e,n,{key:a,value:i[l],$index:u++}))}return f.join("")},if:function(t,e,i,o,a){if(n.call(o,a)){var s=o[a];if(!r.type(s,"empty")||s instanceof Array&&s.length>0)return r.fn.template.parse(t,e,i,o)}return""},unless:function(t,e,i,o,a){if(n.call(o,a)){var s=o[a];if(void 0!==s&&!1===s)return r.fn.template.parse(t,e,i,o)}return""},highlight:function(t,e,n,i,o){var a,s=r.fn.template,u=i[o],c=i.highlight||"";return c&&(a=s.get("highlight",s.markup),u=u.replace(new RegExp("("+c.replace(/\\/g,"\\\\")+")","gi"),a)),u},scope:function(t,e,n,i){return r.fn.template.parse(t,e,n,i)},template:function(t,e,n,i){return r.fn.template.parse(t,e,n,i)}}},r.fn.eventEmitter={add:function(t){var e=t.bucket,r=this.event(t.type);t.namespace=r.namespace,t.type=r.type,n.call(e,r.type)||(e[r.type]=[]),e[r.type].push({namespace:r.namespace,type:r.type,handler:t.handler,context:t.context})},event:function(t){return{type:/^(\w+)\.?/.exec(t)[1]||"",namespace:(/^\w+(\.?.*)$/.exec(t)||[])[1]||void 0}},args:function(t){return r.fn.map(this,t,function(t){return t})},on:function(t){return this.add(t)},one:function(t){return t.single=!0,this.add(t)},off:function(t,e,i,o){var a=t.bucket,s=t.handler,u=this.event(t.type);if(n.call(a,u.type))for(var c,f=a[u.type],l=r.type(s,"undefined"),p=u.namespace,h=f.length,d=0;d<h;d++)c=f[d],c.namespace!==p||!l&&s!==c.handler||(f.splice(d,1),h--,d--)},emit:function(e,r){var i=this.args(r),o=i.shift(),a=this.event(o);if(n.call(e,a.type))for(var s,u=a.namespace,c=e[a.type],f=c.length,l=0;l<f;l++)s=c[l],u&&s.namespace!==u||(s.handler.apply(s.context||t,i),s.single&&(c.splice(l,1),f--,l--))}},r.transitions={_enabled:!1,_key:null,_keys:{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},get enabled(){return this._enabled},get disabled(){return!0!==this._enabled},get key(){if(this.enabled){if(this._key)return this._key;var t,e=this._keys,n=document.createElement("xanimate");for(t in e)if(!r.type(n.style[t],"undefined"))return this._key=e[t]}},enable:function(){return this._enabled=!0},disable:function(){return this._enabled=!1}},r.fn.keycodes={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,comma:188},r.define=function(t,e){for(var i=r,o=t.split("."),a=o.length-1,s=0;s<a;s++)n.call(i,o[s])||(i[o[s]]={}),i=i[o[s]];return i[o[a]]=e},r.get=function(t){for(var e=t.split("."),i=e.length,o=r,a=null,s=0;s<i;s++)n.call(o,e[s])?(a=o[e[s]],o=a):a=null;return a},r.create=function(t,e,n){t=t||"",n=n||e||{},e="function"==typeof e&&e.prototype instanceof r&&e||r;var i=function(){return this.init.apply(this,arguments),this};return i.prototype=Object.create(e.prototype),r.extend(i.prototype,n),i.prototype.constructor=i,i.prototype._super_=e,i.prototype._chain_=null,this.define(t,i)},r.prototype={name:"",constructor:r,templates:{},formats:{},config:null,events:null,root:null,deviceExp:/(android|nexus|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i,get _pushSuper(){return r.fn.pushSuper},get _popSuper(){return r.fn.popSuper},get super(){for(var t=this,e=t._chain_||[],r=e[e.length-1],i=e.reduce(function(t,e){return e===r&&t++,t},0);i--;)t=t._super_.prototype;return t&&n.call(t,r)?t[r]:null},get keycode(){return r.fn.keycodes},get transitions(){return r.transitions.enabled},get version(){return"v1.0.0"},get element(){return this.root[0]},get device(){return this.deviceExp.test(navigator.userAgent)},get devicekey(){var t=navigator.userAgent;return((this.deviceExp.exec(t)||[])[1]||"").toLowerCase()},$:function(t,e){return r.$(t,e)},uid:function(){return r.fn.uid()},template:function(t,e){return r.fn.template.parse(t,this.name,this.config.templates,e)},format:function(t,e){return r.fn.template.parse(t,this.name,this.config.formats,e)},html:function(t,e){return this.$(this.template(t,e))},each:function(t,e){return r.fn.each(this,t,e)},first:function(t,e){return r.fn.first(this,t,e)},map:function(t,e){return r.fn.map(this,t,e)},filter:function(t,e){return r.fn.filter(this,t,e)},node:function(t,e){return this.$(this.selector(t),e||this.root||null)},selector:function(t){return"."+this.name+(t&&"-"+t||"")},transition:function(t,e){var n=this.$(t),i=r.transitions.key,o=this;return i?(n.addClass("transition"),n.one(i,function(t){n.removeClass("transition"),e.call(o,t,n)}),this):(n.removeClass("transition"),this.each(n,function(t){this.delay(function(){e.call(this,null,this.$(t))},1)}))},clearTransitions:function(t){var e=r.transitions.key;return e&&this.$(t).off(e).removeClass("transition"),this},transitioning:function(t){return this.$(t).hasClass("transition")},delay:function(t,e){var n,r=this;return n=setTimeout(function(){t.call(r),clearTimeout(n),n=null},e||1)},on:function(t,e){return r.fn.eventEmitter.on({bucket:this.events,type:t,handler:e,context:this}),this},one:function(t,e){return r.fn.eventEmitter.one({bucket:this.events,type:t,handler:e,context:this}),this},off:function(t,e){return r.fn.eventEmitter.off({bucket:this.events,type:t,handler:e}),this},emit:function(t){return r.fn.eventEmitter.emit(this.events,arguments),this},init:function(t,e){this.define(t,e),this.build(),this.bind(),this.mount()},define:function(t,e){return this.root=this.$(t),this.events={},this.config={templates:{},formats:{},events:{}},this.each(this.formats,function(t,e){this.config.formats[e]=t}),this.each(this.templates,function(t,e){this.config.templates[e]=t}),this.configure(e),this},configure:function(t){t=t||{};var e=this.config;return e.events,this.each(t,function(t,i){"events"===i?this.each(t,function(t,e){this.on(e,t)}):r.type(t,"object|arraylike")&&n.call(e,i)?this.each(t,function(t,n){e[i][n]=t}):e[i]=t}),this},param:function(t,e,r,i,o){var a;if(n.call(r,t))return this;if(a=this.$(o||this.root).data(t),(void 0===a&&"undefined"!==e||null===a)&&(a=i),typeof a!==e)switch(e){case"boolean":a="true"===a||!1;break;case"number":a=parseFloat(a,10);break;case"string":a+="";case"undefined":a=i;break;case"object":a=null===a?i:a}return r[t]=a,this},bind:function(){},build:function(){},mount:function(){},unmount:function(){}},r});